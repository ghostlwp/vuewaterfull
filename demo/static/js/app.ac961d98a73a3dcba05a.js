webpackJsonp([1],{"4rqI":function(e,t){throw new Error("Module build failed: ModuleBuildError: Module build failed: Error: `sass-loader` requires `node-sass` >=4. Please install a compatible version.\n    at Object.sassLoader (/Users/liuweipeng/git/vue-waterfall-easy/node_modules/sass-loader/lib/loader.js:31:19)\n    at runLoaders (/Users/liuweipeng/git/vue-waterfall-easy/node_modules/webpack/lib/NormalModule.js:195:19)\n    at /Users/liuweipeng/git/vue-waterfall-easy/node_modules/loader-runner/lib/LoaderRunner.js:364:11\n    at /Users/liuweipeng/git/vue-waterfall-easy/node_modules/loader-runner/lib/LoaderRunner.js:230:18\n    at runSyncOrAsync (/Users/liuweipeng/git/vue-waterfall-easy/node_modules/loader-runner/lib/LoaderRunner.js:143:3)\n    at iterateNormalLoaders (/Users/liuweipeng/git/vue-waterfall-easy/node_modules/loader-runner/lib/LoaderRunner.js:229:2)\n    at iterateNormalLoaders (/Users/liuweipeng/git/vue-waterfall-easy/node_modules/loader-runner/lib/LoaderRunner.js:218:10)\n    at /Users/liuweipeng/git/vue-waterfall-easy/node_modules/loader-runner/lib/LoaderRunner.js:233:3\n    at Object.context.callback (/Users/liuweipeng/git/vue-waterfall-easy/node_modules/loader-runner/lib/LoaderRunner.js:111:13)\n    at Object.module.exports (/Users/liuweipeng/git/vue-waterfall-easy/node_modules/vue-loader/lib/selector.js:21:8)")},NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("7+uW"),s={render:function(){var e=this.$createElement;return(this._self._c||e)("a",{staticClass:"alink",attrs:{href:this.to,target:"_blank"}},[this._t("default")],2)},staticRenderFns:[]};var a={name:"vue-waterfall-easy",components:{alink:i("VU/8")({name:"alink",props:["to"],data:function(){return{msg:"this is from alink.vue"}},methods:{}},s,!1,function(e){i("P3Ya")},null,null).exports},props:{width:{type:Number},height:{type:[Number,String]},reachBottomDistance:{type:Number,default:20},loadingDotCount:{type:Number,default:3},loadingDotStyle:{type:Object},gap:{type:Number,default:20},mobileGap:{type:Number,default:8},maxCols:{type:Number,default:5},imgsArr:{type:Array,required:!0},srcKey:{type:String,default:"src"},hrefKey:{type:String,default:"href"},imgWidth:{type:Number,default:240},isRouterLink:{type:Boolean,default:!1},linkRange:{type:String,default:"card"},loadingTimeOut:{type:Number,default:500},cardAnimationClass:{type:[String],default:"default-card-animation"},enablePullDownEvent:{type:Boolean,default:!1}},data:function(){return{msg:"this is from vue-waterfall-easy.vue",isMobile:!!navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i),isPreloading:!0,isPreloading_c:!0,imgsArr_c:[],loadedCount:0,cols:NaN,imgBoxEls:null,beginIndex:0,colsHeightArr:[],LoadingTimer:null,isFirstLoad:!0,over:!1}},computed:{colWidth:function(){return this.imgWidth+this.gap},imgWidth_c:function(){return this.isMobile?window.innerWidth/2-this.mobileGap:this.imgWidth},hasLoadingSlot:function(){return!!this.$scopedSlots.loading}},mounted:function(){var e=this;this.bindClickEvent(),this.loadingMiddle(),this.preload(),this.cols=this.calcuCols(),this.$on("preloaded",function(){e.isFirstLoad=!1,e.imgsArr_c=e.imgsArr.concat([]),e.$nextTick(function(){e.isPreloading=!1,e.imgBoxEls=e.$el.getElementsByClassName("img-box"),e.waterfall()})}),this.isMobile||this.width||window.addEventListener("resize",this.response),this.isMobile&&this.enablePullDownEvent&&this.pullDown(),this.scroll()},beforeDestroy:function(){window.removeEventListener("resize",this.response)},watch:{isPreloading:function(e,t){var i=this;e?setTimeout(function(){i.isPreloading&&(i.isPreloading_c=!0)},this.loadingTimeOut):this.isPreloading_c=!1},imgsArr:function(e,t){(this.imgsArr_c.length>e.length||this.imgsArr_c.length>0&&e[0]&&!e[0]._height)&&this.reset(),this.preload()}},methods:{preload:function(e,t){var i=this;this.imgsArr.forEach(function(e,t){if(!(t<i.loadedCount)){if(!e[i.srcKey])return i.imgsArr[t]._height="0",i.loadedCount++,void(i.loadedCount==i.imgsArr.length&&i.$emit("preloaded"));var r=new Image;r.src=e[i.srcKey],r.onload=r.onerror=function(e){i.loadedCount++,i.imgsArr[t]._height="load"==e.type?Math.round(i.imgWidth_c/(r.width/r.height)):i.isMobile?i.imgWidth_c:i.imgWidth,"error"==e.type&&(i.imgsArr[t]._error=!0,i.$emit("imgError",i.imgsArr[t])),i.loadedCount==i.imgsArr.length&&i.$emit("preloaded")}}})},calcuCols:function(){var e=this.width?this.width:window.innerWidth,t=parseInt(e/this.colWidth);return t=0===t?1:t,this.isMobile?2:t>this.maxCols?this.maxCols:t},waterfall:function(){if(this.imgBoxEls){var e,t,i,r=this.isMobile?this.imgBoxEls[0].offsetWidth:this.colWidth;0==this.beginIndex&&(this.colsHeightArr=[]);for(var s=this.beginIndex;s<this.imgsArr.length;s++){if(!this.imgBoxEls[s])return;if(i=this.imgBoxEls[s].offsetHeight,s<this.cols)this.colsHeightArr.push(i),e=0,t=s*r;else{var a=Math.min.apply(null,this.colsHeightArr),l=this.colsHeightArr.indexOf(a);e=a,t=l*r,this.colsHeightArr[l]=a+i}this.imgBoxEls[s].style.left=t+"px",this.imgBoxEls[s].style.top=e+"px"}this.beginIndex=this.imgsArr.length}},response:function(){var e=this.cols;this.cols=this.calcuCols(),e!==this.cols&&(this.beginIndex=0,this.waterfall(),this.over&&this.setOverTipPos())},scrollFn:function(){var e=this.$refs.scrollEl;if(!this.isPreloading){var t=Math.min.apply(null,this.colsHeightArr);e.scrollTop+e.offsetHeight>t-this.reachBottomDistance&&(this.isPreloading=!0,this.$emit("scrollReachBottom"))}},scroll:function(){this.$refs.scrollEl.addEventListener("scroll",this.scrollFn)},waterfallOver:function(){this.$refs.scrollEl.removeEventListener("scroll",this.scrollFn),this.isPreloading=!1,this.over=!0,this.setOverTipPos()},setOverTipPos:function(){var e=this,t=Math.max.apply(null,this.colsHeightArr);this.$nextTick(function(){e.$refs.over.style.top=t+"px"})},bindClickEvent:function(){var e=this;this.$el.querySelector(".vue-waterfall-easy").addEventListener("click",function(t){var i=t.target;if(-1===t.target.className.indexOf("over")&&-1==i.className.indexOf("img-box")){for(;-1==i.className.indexOf("img-inner-box");)i=i.parentNode;var r=i.getAttribute("data-index");e.$emit("click",t,{index:r,value:e.imgsArr_c[r]})}})},pullDown:function(){var e,t=this,i=this.$el.querySelector(".vue-waterfall-easy-scroll");i.addEventListener("touchmove",function(r){if(0===i.scrollTop){var s=r.changedTouches[0];e||(e=s.pageY);var a=s.pageY-e;a>0&&r.preventDefault(),t.$emit("pullDownMove",a)}}),i.addEventListener("touchend",function(r){0===i.scrollTop&&(e=NaN,t.$emit("pullDownEnd"))})},loadingMiddle:function(){var e=this.$el.querySelector(".vue-waterfall-easy-scroll"),t=e.offsetWidth-e.clientWidth;this.$el.querySelector(".loading").style.marginLeft=-t/2+"px"},reset:function(){this.imgsArr_c=[],this.beginIndex=0,this.loadedCount=0,this.isFirstLoad=!0,this.isPreloading=!0,this.scroll(),this.over=!1}}},l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"vue-waterfall-easy-container",style:{width:e.width&&!e.isMobile?e.width+"px":"",height:parseFloat(e.height)==e.height?e.height+"px":e.height}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isPreloading_c,expression:"isPreloading_c"}],staticClass:"loading ball-beat",class:{first:e.isFirstLoad}},[e._t("loading",null,{isFirstLoad:e.isFirstLoad}),e._l(e.loadingDotCount,function(t){return e.hasLoadingSlot?e._e():i("div",{staticClass:"dot",style:e.loadingDotStyle})})],2),i("div",{ref:"scrollEl",staticClass:"vue-waterfall-easy-scroll"},[e._t("waterfall-head"),i("div",{staticClass:"vue-waterfall-easy",style:e.isMobile?"":{width:e.colWidth*e.cols+"px",left:"50%",marginLeft:-1*e.colWidth*e.cols/2+"px"}},[e._l(e.imgsArr_c,function(t,r){return i("div",{staticClass:"img-box",class:[e.cardAnimationClass,{__err__:t._error}],style:{padding:(e.isMobile?e.mobileGap:e.gap)/2+"px",width:e.isMobile?"":e.colWidth+"px"}},[i(e.isRouterLink&&"card"==e.linkRange?"router-link":"alink",{tag:"component",staticClass:"img-inner-box",attrs:{"data-index":r,to:"card"==e.linkRange&&t[e.hrefKey]}},[t[e.srcKey]?i(e.isRouterLink&&"img"==e.linkRange?"router-link":"alink",{tag:"component",staticClass:"img-wraper",style:{width:e.imgWidth_c+"px",height:!!t._height&&t._height+"px"},attrs:{to:"img"==e.linkRange&&t[e.hrefKey]}},[i("img",{attrs:{src:t[e.srcKey]}})]):e._e(),e._t("default",null,{index:r,value:t})],2)],1)}),e.over?i("div",{ref:"over",staticClass:"over"},[e._t("waterfall-over",[e._v("被你看光了")])],2):e._e()],2)],2)])},staticRenderFns:[]};var n=i("VU/8")(a,l,!1,function(e){i("Z2k0")},"data-v-14aca05d",null).exports,o=i("mtWM"),d=i.n(o),u={name:"app",data:function(){return{imgsArr:[],group:0,pullDownDistance:0}},components:{vueWaterfallEasy:n},methods:{getData:function(){var e=this;d.a.get("./static/mock/data.json?group="+this.group).then(function(t){e.group++,10!==e.group?e.imgsArr=e.imgsArr.concat(t.data):e.$refs.waterfall.waterfallOver()})},clickFn:function(e,t){var i=t.index,r=t.value;"img"==e.target.tagName.toLowerCase()&&console.log("img clicked",i,r)},imgErrorFn:function(e){console.log("图片加载错误",e)},changeImgArr:function(){var e=this;d.a.get("./static/mock/data-change.json").then(function(t){e.imgsArr=t.data})},pullDownMove:function(e){this.pullDownDistance=e},pullDownEnd:function(e){console.log("pullDownEnd"),this.pullDownDistance>50&&alert("下拉刷新"),this.pullDownDistance=0}},created:function(){this.getData()}},c={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("a",{attrs:{id:"header",href:"https://github.com/lfyfly/vue-waterfall-easy",target:"_blank",title:"github of vue-waterfall-easy"}},[e._v("vue-waterfall-easy")]),i("button",{style:{position:"fixed",zIndex:1e4},on:{click:e.changeImgArr}},[e._v("changeImgArr")]),i("div",{attrs:{id:"content"}},[i("vue-waterfall-easy",{ref:"waterfall",attrs:{imgsArr:e.imgsArr},on:{scrollReachBottom:e.getData,click:e.clickFn,imgError:e.imgErrorFn},scopedSlots:e._u([{key:"default",fn:function(t){return i("div",{staticClass:"img-info"},[i("p",{staticClass:"some-info"},[e._v("第"+e._s(t.index+1)+"张图片")]),i("p",{staticClass:"some-info"},[e._v(e._s(t.value.info))])])}}])})],1)])},staticRenderFns:[]};var g=i("VU/8")(u,c,!1,function(e){i("4rqI")},null,null).exports,h=i("/ocq");r.a.use(h.a);var m=new h.a({routes:[{path:"/test",name:"test",component:{name:"test",template:"<h1>test test test test test test</h1>"}}]}),f=i("Gs/g"),p=i.n(f);window.Promise||(window.Promise=p.a),new r.a({el:"#app",router:m,template:"<App/>",components:{App:g}})},P3Ya:function(e,t){throw new Error("Module build failed: ModuleBuildError: Module build failed: Error: `sass-loader` requires `node-sass` >=4. Please install a compatible version.\n    at Object.sassLoader (/Users/liuweipeng/git/vue-waterfall-easy/node_modules/sass-loader/lib/loader.js:31:19)\n    at runLoaders (/Users/liuweipeng/git/vue-waterfall-easy/node_modules/webpack/lib/NormalModule.js:195:19)\n    at /Users/liuweipeng/git/vue-waterfall-easy/node_modules/loader-runner/lib/LoaderRunner.js:364:11\n    at /Users/liuweipeng/git/vue-waterfall-easy/node_modules/loader-runner/lib/LoaderRunner.js:230:18\n    at runSyncOrAsync (/Users/liuweipeng/git/vue-waterfall-easy/node_modules/loader-runner/lib/LoaderRunner.js:143:3)\n    at iterateNormalLoaders (/Users/liuweipeng/git/vue-waterfall-easy/node_modules/loader-runner/lib/LoaderRunner.js:229:2)\n    at iterateNormalLoaders (/Users/liuweipeng/git/vue-waterfall-easy/node_modules/loader-runner/lib/LoaderRunner.js:218:10)\n    at /Users/liuweipeng/git/vue-waterfall-easy/node_modules/loader-runner/lib/LoaderRunner.js:233:3\n    at Object.context.callback (/Users/liuweipeng/git/vue-waterfall-easy/node_modules/loader-runner/lib/LoaderRunner.js:111:13)\n    at Object.module.exports (/Users/liuweipeng/git/vue-waterfall-easy/node_modules/vue-loader/lib/selector.js:21:8)")},Z2k0:function(e,t){throw new Error("Module build failed: ModuleBuildError: Module build failed: Error: `sass-loader` requires `node-sass` >=4. Please install a compatible version.\n    at Object.sassLoader (/Users/liuweipeng/git/vue-waterfall-easy/node_modules/sass-loader/lib/loader.js:31:19)\n    at runLoaders (/Users/liuweipeng/git/vue-waterfall-easy/node_modules/webpack/lib/NormalModule.js:195:19)\n    at /Users/liuweipeng/git/vue-waterfall-easy/node_modules/loader-runner/lib/LoaderRunner.js:364:11\n    at /Users/liuweipeng/git/vue-waterfall-easy/node_modules/loader-runner/lib/LoaderRunner.js:230:18\n    at runSyncOrAsync (/Users/liuweipeng/git/vue-waterfall-easy/node_modules/loader-runner/lib/LoaderRunner.js:143:3)\n    at iterateNormalLoaders (/Users/liuweipeng/git/vue-waterfall-easy/node_modules/loader-runner/lib/LoaderRunner.js:229:2)\n    at iterateNormalLoaders (/Users/liuweipeng/git/vue-waterfall-easy/node_modules/loader-runner/lib/LoaderRunner.js:218:10)\n    at /Users/liuweipeng/git/vue-waterfall-easy/node_modules/loader-runner/lib/LoaderRunner.js:233:3\n    at Object.context.callback (/Users/liuweipeng/git/vue-waterfall-easy/node_modules/loader-runner/lib/LoaderRunner.js:111:13)\n    at Object.module.exports (/Users/liuweipeng/git/vue-waterfall-easy/node_modules/vue-loader/lib/selector.js:21:8)")}},["NHnr"]);
//# sourceMappingURL=app.ac961d98a73a3dcba05a.js.map